# Containerizing and Making Improvements to the ISS Trajectory Data API

The homework05 directory consists of three files: <code>iss_tracker.py</code>, <code>README.md</code>, and <code>Dockerfile</code>.

The <code>iss_tracker.py</code> file queries and returns information from an International Space Station (ISS) data set that consists of interesting positional and velocity data. The data set contains ISS state vectors over an approximate 15-day period with Cartesian vectors for both position and velocity as well as a time stamp (EPOCH). The frame of reference for these vectors is Earth, based on the J2000 reference frame.

## The Flask Application
The Flask application loads in the data from a link, https://spotthestation.nasa.gov/trajectory_data.cfm. This link contains .txt and .xml formats of the latest generated ISS trajectory data (called an ephemeris), generated by the ISS Trajectory Operations and Planning Officer (TOPO) flight controls in the Mission Control Center at NASA's Johnson Space Center. End users can then use routes to return specific information from the data set (using /, /epochs, /epochs/(epoch), /epochs/(epoch)/speed, etc.).
## Instructions:

First Method:

Use <code>git clone git@github.com:Amandawlee/my-coe332-hws.git</code> to clone the repository to your local system. Then, locate the file through <code>cd my-coe332-hws/homework05</code>. In order to run the code, run the Flask application through one ssh terminal and then query it through another ssh terminal.

To run the Flask application, insert the following on the command line: <code>flask --app iss_tracker --debug run</code>.

Second Method:

Use <code>git clone git@github.com:Amandawlee/my-coe332-hws.git</code> to clone the repository to your local system. Then, locate the file through <code>cd my-coe332-hws/homework05</code>. Build a Docker image locally from the Dockerfile with <code>docker build -t username/iss_tracker:hw05 .</code>. Then, run the image as a container with <code>docker run -it --rm -p 5000:5000 username/iss_tracker:hw05</code>. Replace <code>username</code> with your username for Docker Hub.

Third Method:

Pull a prebuilt image on Docker Hub with <code>docker pull amandawlee/iss_tracker:hw05</code>  and run it using <code>docker run -it --rm -p 5000:5000 amandawlee/iss_tracker:hw05</code>.

## Example Output:

To query the Flask application, inserting the following on the command line (depending on what information you would like to see):

```
$ curl http://127.0.0.1:5000...
        /                                  Returns entire data set
        /epochs                            Returns list of all Epochs in the data set
        /epochs?limit=int&offset=int       Returns modified list of Epochs given query parameters
        /epochs/<epoch>                    Returns state vectors for a specific Epoch from the data set
        /epochs/<epoch>/speed              Returns instantaneous speed for a specific Epoch in the data set
        /help                              Returns help text that briefly describes each route
        /delete-data                       Deletes all data from the dictionary object
        /post-data                         Reloads the dictionary object with data from the web
```

<code>limit</code> controls how many epoch time stamp results are returned, and <code>offset</code> sets the starting point of epochs with an integer. For example when <code>offset=0</code>, it will begin printing at the first Epoch time stamp.

Running <code>curl http://127.0.0.1:5000/</code>:

```
[vm] $ curl http://127.0.0.1:5000/
{
  "ndm": {
    "oem": {
      "@id": "CCSDS_OEM_VERS",
      "@version": "2.0",
      "body": {
        "segment": {
          "data": {
            "COMMENT": [
              "Units are in kg and m^2",
              "MASS=460724.00",
              "DRAG_AREA=1742.80",
              "DRAG_COEFF=3.25",
              "SOLAR_RAD_AREA=0.00",
              "SOLAR_RAD_COEFF=0.00",
              "Orbits start at the ascending node epoch",
.
.
.
             "stateVector": [
               {
                 "EPOCH": "2023-048T12:00:00.000Z",
                 "X": {
                   "#text": "-5097.51711371908",
                   "@units": "km"
                 },
                 "X_DOT": {
                   "#text": "-4.5815461024513304",
                   "@units": "km/s"
                 },
                 "Y": {
                   "#text": "1610.3574036042901",
                   "@units": "km"
                 },
                 "Y_DOT": {
                   "#text": "-4.8951801207083303",
                   "@units": "km/s"
                 },
                 "Z": {
                   "#text": "-4194.4848049601396",
                   "@units": "km"
                 },
                 "Z_DOT": {
                   "#text": "3.70067961081915",
                   "@units": "km/s"
                 }
              } ,
.
.
.
}
```

Running <code>curl http://127.0.0.1:5000/epochs</code>:

```
[vm] $ curl http://127.0.0.1:5000/epochs
[
  "2023-048T12:00:00.000Z",
  "2023-048T12:04:00.000Z",
  "2023-048T12:08:00.000Z",
  "2023-048T12:12:00.000Z",
  "2023-048T12:16:00.000Z",
  "2023-048T12:20:00.000Z",
  "2023-048T12:24:00.000Z",
  "2023-048T12:28:00.000Z",
  "2023-048T12:32:00.000Z",
  "2023-048T12:36:00.000Z",
  "2023-048T12:40:00.000Z",
  "2023-048T12:44:00.000Z",
  "2023-048T12:48:00.000Z",
  "2023-048T12:52:00.000Z",
  "2023-048T12:56:00.000Z",
  "2023-048T13:00:00.000Z",
  "2023-048T13:04:00.000Z",
  "2023-048T13:08:00.000Z",
  "2023-048T13:12:00.000Z",
  "2023-048T13:16:00.000Z",
  "2023-048T13:20:00.000Z",
  "2023-048T13:24:00.000Z",
  "2023-048T13:28:00.000Z",
  "2023-048T13:32:00.000Z",
.
.
.
]
```

Running <code>curl 'http://127.0.0.1:5000/epochs?limit=5&offset=50'</code>:

```
[vm] $ curl 'http://127.0.0.1:5000/epochs?limit=5&offset=50'
[
  "2023-058T15:20:00.000Z",
  "2023-058T15:24:00.000Z",
  "2023-058T15:28:00.000Z",
  "2023-058T15:32:00.000Z",
  "2023-058T15:36:00.000Z"
]
```

Running <code>curl http://127.0.0.1:5000/epochs/2023-058T15:36:00.000Z</code>:

```
[vm] $ curl http://127.0.0.1:5000/epochs/2023-058T15:36:00.000Z
{
  "EPOCH": "2023-058T15:36:00.000Z",
  "X": {
    "#text": "-2584.8347176761799",
    "@units": "km"
  },
  "X_DOT": {
    "#text": "6.4488087377715102",
    "@units": "km/s"
  },
  "Y": {
    "#text": "-3355.1558291966098",
    "@units": "km"
  },
  "Y_DOT": {
    "#text": "-4.1090282050313602",
    "@units": "km/s"
  },
  "Z": {
    "#text": "5303.0056689886196",
    "@units": "km"
  },
  "Z_DOT": {
    "#text": "0.54644752112960004",
    "@units": "km/s"
  }
}
```

Running <code>curl http://127.0.0.1:5000/epochs/2023-058T15:36:00.000Z/speed</code>:

```
[vm] $ curl http://127.0.0.1:5000/epochs/2023-058T15:36:00.000Z/speed
7.666149738913929
```

Running <code>curl http://127.0.0.1:5000/help</code>:

```
[vm] $ curl http://127.0.0.1:5000/help
Access elements from the NASA ISS Trajectory data set with the following routes:
$ curl http://127.0.0.1:5000...
        /                                  Returns entire data set
        /epochs                            Returns list of all Epochs in the data set
        /epochs?limit=int&offset=int       Returns modified list of Epochs given query parameters
        /epochs/<epoch>                    Returns state vectors for a specific Epoch from the data set
        /epochs/<epoch>/speed              Returns instantaneous speed for a specific Epoch in the data set
        /help                              Returns help text that briefly describes each route
        /delete-data                       Deletes all data from the dictionary object
        /post-data                         Reloads the dictionary object with data from the web
```

Running <code>curl -X DELETE http://127.0.0.1:5000/delete-data</code>:

```
[vm] $ curl -X DELETE http://127.0.0.1:5000/delete-data
NASA ISS trajectory data set has been deleted.
```

Running <code>curl -X POST http://127.0.0.1:5000/post-data</code>:

```
[vm] $ curl -X POST http://127.0.0.1:5000/post-data
NASA ISS Trajectory data set has been reloaded.
```
